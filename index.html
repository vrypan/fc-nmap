<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fc-nmap</title>
    <meta name="description" content="fc-nmap is a tool that scans the Farcaster network and collects hub information.">
    <link rel="stylesheet" href="styles.css">
    <meta property="og:title" content="fc-nmap">
    <meta property="og:description" content="fc-nmap is a tool that scans the Farcaster network and collects hub information.">
    <meta property="og:image" content="https://vrypan.github.io/fc-nmap/og-image.png">
    <meta property="og:url" content="https://vrypan.github.io/fc-nmap">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://vrypan.github.io/fc-nmap/og-image.png">
    <meta property="fc:frame" content="vNext">
    <meta property="fc:frame:image" content="https://vrypan.github.io/fc-nmap/og-image.png">
    <meta property="fc:frame:button:1" content="View on Github">
    <meta property="fc:frame:post_url" content="https://vrypan.github.io/fc-nmap">
    <script type="module">
        import { sdk } from 'https://esm.sh/@farcaster/frame-sdk'
        
        // Call ready when the page is loaded
        async function rewriteLinks() {
            const links = document.querySelectorAll("a[href^='http']");
            for (let link of links) {
                link.addEventListener("click", (event) => {
                    event.preventDefault();
                    frame.sdk.actions.openUrl(link.getAttribute("href"));
                });
            }
        }
        window.addEventListener('load', async () => {
            try {
                await sdk.actions.ready();
                console.log('Frame is ready');
                const ctx = await frame.sdk.context;
                ctx ? await rewriteLinks() : null;
                
            } catch (e) {
                console.error('Failed to initialize frame:', e);
            }
        });
    </script>
</head>
<body>
    <div class="container">
        <div class="content">
            <h1>fc-nmap</h1>
<p><strong>THis software is still in alpha and under heavy development.</strong> Things will change and break.</p>
<p><a href="https://pypi.org/project/fc-nmap"><img src="https://img.shields.io/pypi/v/fc-nmap.svg" alt="PyPI - Version"></a>
<a href="https://pypi.org/project/fc-nmap"><img src="https://img.shields.io/pypi/pyversions/fc-nmap.svg" alt="PyPI - Python Version"></a></p>
<hr>
<p><img src="https://raw.githubusercontent.com/vrypan/fc-nmap/main/map.png" alt="world map of hubs"></p>
<h2>Quickstart</h2>
<pre><code class="language-console">pip install fc-nmap

fc-nmap --help

Usage: fc-nmap [OPTIONS] COMMAND [ARGS]...

  Farcaster Network Mapper

Options:
  --version   Show the version and exit.
  -h, --help  Show this message and exit.

Commands:
  exportdb  Create a tab separated dump of the database
  initdb    Initialize the database
  scan      Scan will scan the network
  updatedb  Collect addtional information about each hub
  map       Create a mpa of the hubs in db
</code></pre>
<h2>Behind the scenes</h2>
<p><code>fc-nmap initdb</code> creates a local sqlite database where data is stored.</p>
<p><code>fc-nmap scan</code> will start by asking a hub to provide its contact list (gRPC call <code>GetCurrentPeers</code>). Using this list, it will pick <code>--hops</code>
hubs at random, and request their contact list too. The lists are combined and stored in the database.</p>
<p><code>fc-nmap updatedb --hub-info</code> looks into the database and picks hubs that were recently active.
(Recency is defined by comparing <code>ContactInfoContentBody.timestamp</code> collected when requesting the contacts lists and the current timestamp.)
The command will try to connect to each one of the hubs, and collect additional info using <code>GetInfo</code>, and store the results in the local
database.</p>
<p><code>fc-nmap updatedb --hub-location</code> works similar to <code>--hub-info</code>, but uses ip2location.io to get location information about each hub IP.
Again, information collected is stored in the local database. The script will not query ip2location for IPs that were looked up in the last
100 days. This helps staying within ip2location free plan limits.</p>
<p><code>fc-nmap export --report=all</code> will export all &quot;active&quot; hubs. Use fc-nmap export --help` to get all the available exports/reports.
Or connect directly to the local database (currently named hubs.db and stored in the directory where you called the previous commands)
and run your own queries.</p>
<h2>License</h2>
<p><code>fc-nmap</code> is distributed under the terms of the <a href="https://spdx.org/licenses/MIT.html">MIT</a> license.</p>

        </div>
        <div class="footer">
            <a href="https://github.com/vrypan/fc-nmap" class="github-button">View on Github</a>
        </div>
    </div>
</body>
</html> 